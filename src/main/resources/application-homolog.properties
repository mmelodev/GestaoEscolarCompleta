spring.application.name=plataforma

# Database Configuration (Homologação)
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=${DB_DRIVER:com.mysql.cj.jdbc.Driver}

# JPA/Hibernate Configuration (Homologação)
# Permite atualizações automáticas para facilitar testes, mas deve ser migrado para 'none' em produção
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# JWT Configuration
# ⚠️ OBRIGATÓRIO: JWT_SECRET deve ser configurado via variável de ambiente
# ⚠️ Mínimo: 32 caracteres (256 bits) para segurança adequada
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}
jwt.secret.min-length=32

# Redis Configuration
spring.data.redis.host=${REDIS_HOST}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}

# Cache Configuration (Redis em homologação)
spring.cache.type=redis
app.cache.enabled=${CACHE_ENABLED:true}
app.cache.default-ttl=${CACHE_DEFAULT_TTL:PT10M}
app.cache.cache-null-values=${CACHE_ALLOW_NULL:false}
app.cache.key-prefix=${CACHE_KEY_PREFIX:plataforma::}

# Swagger Configuration (habilitado para testes em homologação)
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true

# Default Users Configuration
# ⚠️ Em homologação, pode ser útil ter usuários padrão para testes
# Configure através de variáveis de ambiente
app.default.admin.password=${APP_DEFAULT_ADMIN_PASSWORD:}
app.default.test.password=${APP_DEFAULT_TEST_PASSWORD:}

# CORS Configuration (Homologação)
# Mais permissivo que produção, mas ainda controlado
# Permite localhost e domínios de homologação (ex: Railway, Render)
app.cors.allowed-origin-patterns=${CORS_ALLOWED_ORIGIN_PATTERNS:http://localhost:*,https://*.railway.app,https://*.render.com}

# File Upload Configuration
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB

# Configurações de validação de upload
app.upload.max-file-size=${UPLOAD_MAX_FILE_SIZE:5242880}
app.upload.allowed-extensions=${UPLOAD_ALLOWED_EXTENSIONS:.jpg,.jpeg,.png,.gif,.webp}
app.upload.validate-image-content=${UPLOAD_VALIDATE_IMAGE_CONTENT:true}
app.upload.max-image-width=${UPLOAD_MAX_IMAGE_WIDTH:4096}
app.upload.max-image-height=${UPLOAD_MAX_IMAGE_HEIGHT:4096}

