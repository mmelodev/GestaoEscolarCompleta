<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deletar Aluno - AriranG</title>
    <link rel="stylesheet" th:href="@{/css/cadastro.css?v=1.0}" />
    <link rel="stylesheet" th:href="@{/css/forms.css?v=1.1}" />
    <link rel="stylesheet" th:href="@{/css/header.css?v=2.1}" />
    <link rel="stylesheet" th:href="@{/css/home.css?v=1.0}" />
    <style>
        .form-card, .form-card h1, .form-card label { color: #1a1a1a; }
        .form-card input { color: #1a1a1a; }
        .delete-container { display: flex; flex-direction: column; align-items: center; gap: 20px; padding: 40px; }
        .delete-card { background: #fff; border-radius: 12px; padding: 30px; max-width: 500px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); text-align: center; }
        .delete-card h1 { color: #d32f2f; margin-bottom: 20px; }
        .delete-card p { color: #1a1a1a; margin-bottom: 30px; font-size: 16px; }
        .student-info { background: #f5f5f5; padding: 15px; border-radius: 8px; margin: 20px 0; }
        .student-info div { color: #1a1a1a; margin: 5px 0; }
        .student-name { font-weight: bold; color: #1a1a1a; }
        .actions { display: flex; gap: 15px; justify-content: center; }
        .btn-delete { background: #d32f2f; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; }
        .btn-delete:hover { background: #b71c1c; }
        .btn-cancel { background: #666; color: white; padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; text-decoration: none; display: inline-block; }
        .btn-cancel:hover { background: #555; }
        .error { color: #d32f2f; margin-top: 15px; }

        /* Mobile */
        @media (max-width: 480px) {
            .delete-container { padding: 16px; }
            .delete-card { padding: 18px; width: 100%; }
            .actions { flex-direction: column; align-items: stretch; }
            .btn-delete, .btn-cancel { width: 100%; }
        }
    </style>
</head>
<body>
<header>
    <div class="main-nav" style="margin-bottom: 1rem;">
        <div class="logo">
            <a th:href="@{/}"><img th:src="@{/img/horizontal_negativa.png}" alt="Logo" /></a>
        </div>
        <nav>
            <!-- Bot√£o Hamb√∫rguer - Mobile -->
            <button class="menu-toggle" id="menuToggle" aria-label="Abrir menu" aria-expanded="false" aria-controls="navList">
                <span></span>
                <span></span>
                <span></span>
            </button>

            <ul class="nav-list" id="navList">
                <a th:href="@{/}"><li class="nav-element">Home</li></a>
                <a th:href="@{/alunos/lista}"><li class="nav-element active">Alunos</li></a>
                <a th:href="@{/turmas}"><li class="nav-element">Turmas</li></a>
                <a th:href="@{/cadastro}"><li class="nav-element">Cadastro</li></a>
                <a sec:authorize="isAuthenticated()" th:href="@{/perfil}"><li class="nav-element">Meu Perfil</li></a>
                <a sec:authorize="isAuthenticated()" th:href="@{/configuracao}"><li class="nav-element">üé® Personaliza√ß√£o</li></a>
            </ul>
        </nav>
    </div>
    <div class="menu-overlay" id="menuOverlay" aria-hidden="true"></div>
</header>

<div class="delete-container">
    <div class="delete-card">
        <h1>‚ö†Ô∏è Confirmar Exclus√£o</h1>
        <p>Tem certeza de que deseja excluir este aluno?</p>
        
        <div class="student-info">
            <div class="student-name" th:text="${aluno.nomeCompleto}">Nome do Aluno</div>
            <div th:if="${aluno.email != null && !aluno.email.isEmpty()}" th:text="'Email: ' + ${aluno.email}"></div>
            <div th:if="${aluno.telefone != null && !aluno.telefone.isEmpty()}" th:text="'Telefone: ' + ${aluno.telefone}"></div>
        </div>
        
        <p style="color: #d32f2f; font-weight: bold;">Esta a√ß√£o n√£o pode ser desfeita!</p>
        
        <div class="actions">
            <form th:action="@{'/alunos/' + ${aluno.id}}" method="post" style="display: inline;">
                <!-- CSRF Token -->
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <input type="hidden" name="_method" value="delete" />
                <button type="submit" class="btn-delete">Sim, Excluir</button>
            </form>
            <a th:href="@{/alunos/lista}" class="btn-cancel">Cancelar</a>
        </div>
        
        <div th:if="${error != null}" class="error" th:text="${error}"></div>
    </div>
</div>

<script th:inline="javascript">
/* ============================================
   MENU HAMB√öRGUER - Mobile Navigation
   ============================================ */
document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.getElementById('menuToggle');
    const navList = document.getElementById('navList');
    const menuOverlay = document.getElementById('menuOverlay');
    const body = document.body;
    let scrollYBeforeMenu = 0;

    if (!menuToggle || !navList) return;

    function lockPageScroll() {
        scrollYBeforeMenu = window.pageYOffset || document.documentElement.scrollTop || 0;
        body.dataset.scrollYBeforeMenu = String(scrollYBeforeMenu);
        body.style.position = 'fixed';
        body.style.top = `-${scrollYBeforeMenu}px`;
        body.style.left = '0';
        body.style.right = '0';
        body.style.width = '100%';
        body.style.overflow = 'hidden';
    }

    function unlockPageScroll() {
        const y = parseInt(body.dataset.scrollYBeforeMenu || '0', 10) || 0;
        body.style.position = '';
        body.style.top = '';
        body.style.left = '';
        body.style.right = '';
        body.style.width = '';
        body.style.overflow = '';
        delete body.dataset.scrollYBeforeMenu;
        window.scrollTo(0, y);
    }

    function openMenu() {
        navList.classList.add('menu-open');
        menuToggle.classList.add('active');
        menuToggle.setAttribute('aria-expanded', 'true');
        if (menuOverlay) {
            menuOverlay.classList.add('active');
            menuOverlay.setAttribute('aria-hidden', 'false');
        }
        if (window.innerWidth < 1024) lockPageScroll();
    }

    function closeMenu() {
        navList.classList.remove('menu-open');
        menuToggle.classList.remove('active');
        menuToggle.setAttribute('aria-expanded', 'false');
        if (menuOverlay) {
            menuOverlay.classList.remove('active');
            menuOverlay.setAttribute('aria-hidden', 'true');
        }
        unlockPageScroll();
    }

    function toggleMenu() {
        const isOpen = navList.classList.contains('menu-open');
        if (isOpen) closeMenu(); else openMenu();
    }

    menuToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        toggleMenu();
    });

    if (menuOverlay) menuOverlay.addEventListener('click', closeMenu);

    navList.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', function() {
            if (window.innerWidth < 1024) closeMenu();
        });
    });

    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && navList.classList.contains('menu-open')) {
            closeMenu();
            menuToggle.focus();
        }
    });

    let resizeTimer;
    window.addEventListener('resize', function() {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(function() {
            if (window.innerWidth >= 1024 && navList.classList.contains('menu-open')) {
                closeMenu();
            }
        }, 250);
    });
});
</script>
</body>
</html>